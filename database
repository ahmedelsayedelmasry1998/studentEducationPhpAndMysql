CREATE DATABASE studentEducation;
CREATE TABLE tbl_tution (tutionId int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,name varchar(200),tageLine varchar(200),address varchar(250),state varchar(255),city varchar(255),logo varchar(255),email varchar(255),phone varchar(255),url varchar(255),courses varchar(255));
CREATE TABLE tbl_admin (adminId int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,fName varchar(200),lName varchar(200),address varchar(250),email varchar(255),phone varchar(255),password varchar(255),tutionId int(11),CONSTRAINT admin_tution FOREIGN KEY(tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE tbl_branch(branchId int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT , address varchar(250),state varchar(250),city varchar(200),phone varchar(250),tutionId int(11),CONSTRAINT branch_tution FOREIGN KEY (tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE ON DELETE CASCADE);
ALTER TABLE tbl_branch ADD branchActive int(1) DEFAULT(1);
CREATE TABLE tbl_student(studentId int(11) PRIMARY KEY not null AUTO_INCREMENT,photo varchar(250),name varchar(250),fatherName varchar(250),matherName varchar(250),sex varchar(50),dob varchar(100),phone varchar(200),email varchar(200),password varchar(200),std varchar(150),address varchar(200),state varchar(200),city varchar(200),totalFees int(11),paidFees int(11),tutionId int(11),CONSTRAINT student_tution FOREIGN KEY(tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE ON DELETE CASCADE,branchId int(11),CONSTRAINT student_branch FOREIGN KEY(branchId) REFERENCES tbl_branch(branchId) ON UPDATE CASCADE ON DELETE CASCADE);
ALTER TABLE tbl_student ADD studentActive int(1) DEFAULT(1);
CREATE TABLE tbl_staff(staffId int(11) PRIMARY KEY not null AUTO_INCREMENT,photo varchar(250),name varchar(250),middleName varchar(250),sex varchar(250),phone varchar(100),email varchar(200),password varchar(200),qualifaction varchar(200),totalSalary int(11),paidSalary int(11),exp varchar(200),address varchar(200),state varchar(200),city varchar(200),type varchar(200),tutionId int(11),CONSTRAINT staff_tution FOREIGN KEY(tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE ON DELETE CASCADE,branchId int(11),CONSTRAINT staff_branch FOREIGN KEY(branchId) REFERENCES tbl_branch(branchId) ON UPDATE CASCADE ON DELETE CASCADE,staffActive int(1) DEFAULT(1));

CREATE TABLE tbl_expenses (expensesId int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,expenses varchar(250),amt int(10),date date,remark varchar(250),branchId int(11),CONSTRAINT expenses_branch FOREIGN KEY (branchId) REFERENCES tbl_branch(branchId) ON UPDATE CASCADE ON DELETE CASCADE,tutionId int(11),CONSTRAINT expenses_tution FOREIGN KEY(tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE on DELETE CASCADE);

ALTER TABLE tbl_expenses ADD expensesActive int(1) DEFAULT(1);
CREATE TABLE tbl_attendence (attendenceId int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,date date,attendence int(1),type varchar(250),tutionId int(11),CONSTRAINT attendense_tution FOREIGN KEY (tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE ON DELETE CASCADE,studentId int(11),CONSTRAINT attendense_student FOREIGN KEY(studentId) REFERENCES tbl_student(studentId) ON UPDATE CASCADE ON DELETE CASCADE );
ALTER TABLE tbl_attendence ADD attendenceActive int(1) DEFAULT(1);
CREATE TABLE tbl_marks(marksId int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,date date,eng1 int(3),gramer int(3),maths int(3),sci int(3),ss int(3),env int(3),gk int(3),hindi int(3),sanskrit int(3),computer int(3),eco int(3),oc int(3),ac int(3),guj int(3),bio int(3),studentId int(11),CONSTRAINT marks_student FOREIGN KEY (studentId) REFERENCES tbl_student(studentId) ON UPDATE CASCADE ON DELETE CASCADE );
CREATE TABLE tbl_fees(feesId int(11) PRIMARY KEY AUTO_INCREMENT NOT NULL,amt int(11),date date,tutionId int(11),CONSTRAINT fees_tution FOREIGN KEY (tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE ON DELETE CASCADE,studentId int(11),CONSTRAINT fees_student FOREIGN KEY(studentId) REFERENCES tbl_student(studentId) ON UPDATE CASCADE ON DELETE CASCADE,branchId int(11),CONSTRAINT fees_branch FOREIGN KEY(branchId) REFERENCES tbl_branch(branchId) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE tbl_salary(salaryId int(11) PRIMARY KEY AUTO_INCREMENT NOT NULL,amt int(11),date date,tutionId int(11),CONSTRAINT salary_tution FOREIGN KEY (tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE ON DELETE CASCADE,staffId int(11),CONSTRAINT salary_staff FOREIGN KEY(staffId) REFERENCES tbl_staff(staffId) ON UPDATE CASCADE ON DELETE CASCADE,branchId int(11),CONSTRAINT salary_branch FOREIGN KEY(branchId) REFERENCES tbl_branch(branchId) ON UPDATE CASCADE ON DELETE CASCADE);
ALTER TABLE tbl_salary ADD total int(5);

CREATE TABLE tbl_course(courseId int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,shortName varchar(200),name varchar(250));
CREATE TABLE tbl_notice (noticeId int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,noticeHead varchar(250),noticeBody varchar(250),recipient varchar(100),date date,time time,tutionId int(11),CONSTRAINT notice_tution FOREIGN KEY (tutionId) REFERENCES tbl_tution(tutionId) ON UPDATE CASCADE ON DELETE CASCADE);